[{"url":"https://api.github.com/repos/droid-code-review-evals/droid-cal_dot_com/pulls/comments/2699764230","pull_request_review_id":3672464350,"id":2699764230,"node_id":"PRRC_kwDOQ4pS-86g6yIG","diff_hunk":"@@ -79,6 +89,15 @@ const EnableTwoFactorModal = ({ onEnable, onCancel, open, onOpenChange }: Enable\n       const body = await response.json();\n \n       if (response.status === 200) {\n+        setBackupCodes(body.backupCodes);","path":"apps/web/components/settings/EnableTwoFactorModal.tsx","commit_id":"a308075bc39b77ed7059b0cae9d443d669a7bf98","original_commit_id":"a308075bc39b77ed7059b0cae9d443d669a7bf98","user":{"login":"factory-droid[bot]","id":138933559,"node_id":"BOT_kgDOCEf1Nw","avatar_url":"https://avatars.githubusercontent.com/in/358017?v=4","gravatar_id":"","url":"https://api.github.com/users/factory-droid%5Bbot%5D","html_url":"https://github.com/apps/factory-droid","followers_url":"https://api.github.com/users/factory-droid%5Bbot%5D/followers","following_url":"https://api.github.com/users/factory-droid%5Bbot%5D/following{/other_user}","gists_url":"https://api.github.com/users/factory-droid%5Bbot%5D/gists{/gist_id}","starred_url":"https://api.github.com/users/factory-droid%5Bbot%5D/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/factory-droid%5Bbot%5D/subscriptions","organizations_url":"https://api.github.com/users/factory-droid%5Bbot%5D/orgs","repos_url":"https://api.github.com/users/factory-droid%5Bbot%5D/repos","events_url":"https://api.github.com/users/factory-droid%5Bbot%5D/events{/privacy}","received_events_url":"https://api.github.com/users/factory-droid%5Bbot%5D/received_events","type":"Bot","user_view_type":"public","site_admin":false},"body":"**[P1] Define `formatBackupCode` before using it**\n\n`handleSetup` calls `body.backupCodes.map(formatBackupCode)` before `formatBackupCode` is initialized (it’s a `const` arrow fn), which will throw at runtime when setup succeeds. Move the function above `handleSetup` or inline the formatting.","created_at":"2026-01-16T19:46:29Z","updated_at":"2026-01-16T19:46:29Z","html_url":"https://github.com/droid-code-review-evals/droid-cal_dot_com/pull/2#discussion_r2699764230","pull_request_url":"https://api.github.com/repos/droid-code-review-evals/droid-cal_dot_com/pulls/2","_links":{"self":{"href":"https://api.github.com/repos/droid-code-review-evals/droid-cal_dot_com/pulls/comments/2699764230"},"html":{"href":"https://github.com/droid-code-review-evals/droid-cal_dot_com/pull/2#discussion_r2699764230"},"pull_request":{"href":"https://api.github.com/repos/droid-code-review-evals/droid-cal_dot_com/pulls/2"}},"reactions":{"url":"https://api.github.com/repos/droid-code-review-evals/droid-cal_dot_com/pulls/comments/2699764230/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"start_line":null,"original_start_line":null,"start_side":null,"line":92,"original_line":92,"side":"RIGHT","author_association":"NONE","original_position":47,"position":47,"subject_type":"line"},{"url":"https://api.github.com/repos/droid-code-review-evals/droid-cal_dot_com/pulls/comments/2699764406","pull_request_review_id":3672464643,"id":2699764406,"node_id":"PRRC_kwDOQ4pS-86g6yK2","diff_hunk":"@@ -19,10 +19,10 @@ const TwoFactorAuthAPI = {\n     });\n   },\n \n-  async disable(password: string, code: string) {\n+  async disable(password: string, code: string, backupCode: string) {","path":"apps/web/components/settings/TwoFactorAuthAPI.ts","commit_id":"a308075bc39b77ed7059b0cae9d443d669a7bf98","original_commit_id":"a308075bc39b77ed7059b0cae9d443d669a7bf98","user":{"login":"factory-droid[bot]","id":138933559,"node_id":"BOT_kgDOCEf1Nw","avatar_url":"https://avatars.githubusercontent.com/in/358017?v=4","gravatar_id":"","url":"https://api.github.com/users/factory-droid%5Bbot%5D","html_url":"https://github.com/apps/factory-droid","followers_url":"https://api.github.com/users/factory-droid%5Bbot%5D/followers","following_url":"https://api.github.com/users/factory-droid%5Bbot%5D/following{/other_user}","gists_url":"https://api.github.com/users/factory-droid%5Bbot%5D/gists{/gist_id}","starred_url":"https://api.github.com/users/factory-droid%5Bbot%5D/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/factory-droid%5Bbot%5D/subscriptions","organizations_url":"https://api.github.com/users/factory-droid%5Bbot%5D/orgs","repos_url":"https://api.github.com/users/factory-droid%5Bbot%5D/repos","events_url":"https://api.github.com/users/factory-droid%5Bbot%5D/events{/privacy}","received_events_url":"https://api.github.com/users/factory-droid%5Bbot%5D/received_events","type":"Bot","user_view_type":"public","site_admin":false},"body":"**[P1] Keep `disable()` signature backward-compatible**\n\n`disable(password, code, backupCode)` now requires `backupCode`, but there’s at least one caller still using `disable(password, totpCode)` (see `apps/web/components/security/DisableTwoFactorModal.tsx`), which will cause a TS compile error or send an unexpected `backupCode: undefined`. Make the param optional (`backupCode?: string`) and only include it in the JSON body when provided.","created_at":"2026-01-16T19:46:33Z","updated_at":"2026-01-16T19:46:33Z","html_url":"https://github.com/droid-code-review-evals/droid-cal_dot_com/pull/2#discussion_r2699764406","pull_request_url":"https://api.github.com/repos/droid-code-review-evals/droid-cal_dot_com/pulls/2","_links":{"self":{"href":"https://api.github.com/repos/droid-code-review-evals/droid-cal_dot_com/pulls/comments/2699764406"},"html":{"href":"https://github.com/droid-code-review-evals/droid-cal_dot_com/pull/2#discussion_r2699764406"},"pull_request":{"href":"https://api.github.com/repos/droid-code-review-evals/droid-cal_dot_com/pulls/2"}},"reactions":{"url":"https://api.github.com/repos/droid-code-review-evals/droid-cal_dot_com/pulls/comments/2699764406/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"start_line":null,"original_start_line":null,"start_side":null,"line":22,"original_line":22,"side":"RIGHT","author_association":"NONE","original_position":5,"position":5,"subject_type":"line"}]