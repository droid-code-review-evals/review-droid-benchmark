[{"url":"https://api.github.com/repos/droid-code-review-evals/droid-cal_dot_com/pulls/comments/2699762808","pull_request_review_id":3672462311,"id":2699762808,"node_id":"PRRC_kwDOQ4pS-86g6xx4","diff_hunk":"@@ -114,7 +114,9 @@ export default class EventManager {\n     }\n \n     // Fallback to Cal Video if Google Meet is selected w/o a Google Cal\n-    if (evt.location === MeetLocationType && evt.destinationCalendar?.integration !== \"google_calendar\") {\n+    // @NOTE: destinationCalendar it's an array now so as a fallback we will only check the first one","path":"packages/core/EventManager.ts","commit_id":"bd797c1ea00a61425735f2b9fd7ce212ebf8c8ab","original_commit_id":"bd797c1ea00a61425735f2b9fd7ce212ebf8c8ab","user":{"login":"factory-droid[bot]","id":138933559,"node_id":"BOT_kgDOCEf1Nw","avatar_url":"https://avatars.githubusercontent.com/in/358017?v=4","gravatar_id":"","url":"https://api.github.com/users/factory-droid%5Bbot%5D","html_url":"https://github.com/apps/factory-droid","followers_url":"https://api.github.com/users/factory-droid%5Bbot%5D/followers","following_url":"https://api.github.com/users/factory-droid%5Bbot%5D/following{/other_user}","gists_url":"https://api.github.com/users/factory-droid%5Bbot%5D/gists{/gist_id}","starred_url":"https://api.github.com/users/factory-droid%5Bbot%5D/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/factory-droid%5Bbot%5D/subscriptions","organizations_url":"https://api.github.com/users/factory-droid%5Bbot%5D/orgs","repos_url":"https://api.github.com/users/factory-droid%5Bbot%5D/repos","events_url":"https://api.github.com/users/factory-droid%5Bbot%5D/events{/privacy}","received_events_url":"https://api.github.com/users/factory-droid%5Bbot%5D/received_events","type":"Bot","user_view_type":"public","site_admin":false},"body":"[P0] Avoid crash when destinationCalendar is empty\n\n`evt.destinationCalendar ?? []` can yield `[]`, so `mainHostDestinationCalendar` is `undefined` and `mainHostDestinationCalendar.integration` will throw at runtime; use optional chaining or a null check before reading `.integration`.","created_at":"2026-01-16T19:45:57Z","updated_at":"2026-01-16T19:45:57Z","html_url":"https://github.com/droid-code-review-evals/droid-cal_dot_com/pull/3#discussion_r2699762808","pull_request_url":"https://api.github.com/repos/droid-code-review-evals/droid-cal_dot_com/pulls/3","_links":{"self":{"href":"https://api.github.com/repos/droid-code-review-evals/droid-cal_dot_com/pulls/comments/2699762808"},"html":{"href":"https://github.com/droid-code-review-evals/droid-cal_dot_com/pull/3#discussion_r2699762808"},"pull_request":{"href":"https://api.github.com/repos/droid-code-review-evals/droid-cal_dot_com/pulls/3"}},"reactions":{"url":"https://api.github.com/repos/droid-code-review-evals/droid-cal_dot_com/pulls/comments/2699762808/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"start_line":null,"original_start_line":null,"start_side":null,"line":117,"original_line":117,"side":"RIGHT","author_association":"NONE","original_position":5,"position":5,"subject_type":"line"},{"url":"https://api.github.com/repos/droid-code-review-evals/droid-cal_dot_com/pulls/comments/2699763347","pull_request_review_id":3672463113,"id":2699763347,"node_id":"PRRC_kwDOQ4pS-86g6x6T","diff_hunk":"@@ -244,7 +253,7 @@ export default class GoogleCalendarService implements Calendar {\n \n       const selectedCalendar = externalCalendarId\n         ? externalCalendarId","path":"packages/app-store/googlecalendar/lib/CalendarService.ts","commit_id":"bd797c1ea00a61425735f2b9fd7ce212ebf8c8ab","original_commit_id":"bd797c1ea00a61425735f2b9fd7ce212ebf8c8ab","user":{"login":"factory-droid[bot]","id":138933559,"node_id":"BOT_kgDOCEf1Nw","avatar_url":"https://avatars.githubusercontent.com/in/358017?v=4","gravatar_id":"","url":"https://api.github.com/users/factory-droid%5Bbot%5D","html_url":"https://github.com/apps/factory-droid","followers_url":"https://api.github.com/users/factory-droid%5Bbot%5D/followers","following_url":"https://api.github.com/users/factory-droid%5Bbot%5D/following{/other_user}","gists_url":"https://api.github.com/users/factory-droid%5Bbot%5D/gists{/gist_id}","starred_url":"https://api.github.com/users/factory-droid%5Bbot%5D/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/factory-droid%5Bbot%5D/subscriptions","organizations_url":"https://api.github.com/users/factory-droid%5Bbot%5D/orgs","repos_url":"https://api.github.com/users/factory-droid%5Bbot%5D/repos","events_url":"https://api.github.com/users/factory-droid%5Bbot%5D/events{/privacy}","received_events_url":"https://api.github.com/users/factory-droid%5Bbot%5D/received_events","type":"Bot","user_view_type":"public","site_admin":false},"body":"[P1] Fix update/delete calendarId selection logic\n\nThis code uses `find((cal) => cal.externalId === externalCalendarId)` even when `externalCalendarId` is already falsy, so the fallback always yields `undefined` and can pass an undefined `calendarId` to Google APIs; previously it used the first destination calendarâ€™s externalId as fallback.","created_at":"2026-01-16T19:46:08Z","updated_at":"2026-01-16T19:46:09Z","html_url":"https://github.com/droid-code-review-evals/droid-cal_dot_com/pull/3#discussion_r2699763347","pull_request_url":"https://api.github.com/repos/droid-code-review-evals/droid-cal_dot_com/pulls/3","_links":{"self":{"href":"https://api.github.com/repos/droid-code-review-evals/droid-cal_dot_com/pulls/comments/2699763347"},"html":{"href":"https://github.com/droid-code-review-evals/droid-cal_dot_com/pull/3#discussion_r2699763347"},"pull_request":{"href":"https://api.github.com/repos/droid-code-review-evals/droid-cal_dot_com/pulls/3"}},"reactions":{"url":"https://api.github.com/repos/droid-code-review-evals/droid-cal_dot_com/pulls/comments/2699763347/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"start_line":null,"original_start_line":null,"start_side":null,"line":255,"original_line":255,"side":"RIGHT","author_association":"NONE","original_position":75,"position":75,"subject_type":"line"},{"url":"https://api.github.com/repos/droid-code-review-evals/droid-cal_dot_com/pulls/comments/2699763614","pull_request_review_id":3672463478,"id":2699763614,"node_id":"PRRC_kwDOQ4pS-86g6x-e","diff_hunk":"@@ -303,7 +312,9 @@ export default class GoogleCalendarService implements Calendar {\n       });\n \n       const defaultCalendarId = \"primary\";\n-      const calendarId = externalCalendarId ? externalCalendarId : event.destinationCalendar?.externalId;\n+      const calendarId = externalCalendarId","path":"packages/app-store/googlecalendar/lib/CalendarService.ts","commit_id":"bd797c1ea00a61425735f2b9fd7ce212ebf8c8ab","original_commit_id":"bd797c1ea00a61425735f2b9fd7ce212ebf8c8ab","user":{"login":"factory-droid[bot]","id":138933559,"node_id":"BOT_kgDOCEf1Nw","avatar_url":"https://avatars.githubusercontent.com/in/358017?v=4","gravatar_id":"","url":"https://api.github.com/users/factory-droid%5Bbot%5D","html_url":"https://github.com/apps/factory-droid","followers_url":"https://api.github.com/users/factory-droid%5Bbot%5D/followers","following_url":"https://api.github.com/users/factory-droid%5Bbot%5D/following{/other_user}","gists_url":"https://api.github.com/users/factory-droid%5Bbot%5D/gists{/gist_id}","starred_url":"https://api.github.com/users/factory-droid%5Bbot%5D/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/factory-droid%5Bbot%5D/subscriptions","organizations_url":"https://api.github.com/users/factory-droid%5Bbot%5D/orgs","repos_url":"https://api.github.com/users/factory-droid%5Bbot%5D/repos","events_url":"https://api.github.com/users/factory-droid%5Bbot%5D/events{/privacy}","received_events_url":"https://api.github.com/users/factory-droid%5Bbot%5D/received_events","type":"Bot","user_view_type":"public","site_admin":false},"body":"[P1] Ensure deleteEvent never sends undefined calendarId\n\n`calendarId` can become `undefined` when `externalCalendarId` is not provided because the fallback again looks for a calendar matching an undefined `externalCalendarId`; `events.delete` requires a concrete `calendarId` (e.g. use the first destination calendar externalId or default to `primary`).","created_at":"2026-01-16T19:46:14Z","updated_at":"2026-01-16T19:46:14Z","html_url":"https://github.com/droid-code-review-evals/droid-cal_dot_com/pull/3#discussion_r2699763614","pull_request_url":"https://api.github.com/repos/droid-code-review-evals/droid-cal_dot_com/pulls/3","_links":{"self":{"href":"https://api.github.com/repos/droid-code-review-evals/droid-cal_dot_com/pulls/comments/2699763614"},"html":{"href":"https://github.com/droid-code-review-evals/droid-cal_dot_com/pull/3#discussion_r2699763614"},"pull_request":{"href":"https://api.github.com/repos/droid-code-review-evals/droid-cal_dot_com/pulls/3"}},"reactions":{"url":"https://api.github.com/repos/droid-code-review-evals/droid-cal_dot_com/pulls/comments/2699763614/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"start_line":null,"original_start_line":null,"start_side":null,"line":315,"original_line":315,"side":"RIGHT","author_association":"NONE","original_position":86,"position":86,"subject_type":"line"},{"url":"https://api.github.com/repos/droid-code-review-evals/droid-cal_dot_com/pulls/comments/2699763801","pull_request_review_id":3672463819,"id":2699763801,"node_id":"PRRC_kwDOQ4pS-86g6yBZ","diff_hunk":"@@ -1843,11 +1871,12 @@ async function handler(\n           id: organizerUser.id,\n         },\n       },\n-      destinationCalendar: evt.destinationCalendar\n-        ? {\n-            connect: { id: evt.destinationCalendar.id },\n-          }\n-        : undefined,\n+      destinationCalendar:\n+        evt.destinationCalendar && evt.destinationCalendar.length > 0\n+          ? {\n+              connect: { id: evt.destinationCalendar[0].id },\n+            }","path":"packages/features/bookings/lib/handleNewBooking.ts","commit_id":"bd797c1ea00a61425735f2b9fd7ce212ebf8c8ab","original_commit_id":"bd797c1ea00a61425735f2b9fd7ce212ebf8c8ab","user":{"login":"factory-droid[bot]","id":138933559,"node_id":"BOT_kgDOCEf1Nw","avatar_url":"https://avatars.githubusercontent.com/in/358017?v=4","gravatar_id":"","url":"https://api.github.com/users/factory-droid%5Bbot%5D","html_url":"https://github.com/apps/factory-droid","followers_url":"https://api.github.com/users/factory-droid%5Bbot%5D/followers","following_url":"https://api.github.com/users/factory-droid%5Bbot%5D/following{/other_user}","gists_url":"https://api.github.com/users/factory-droid%5Bbot%5D/gists{/gist_id}","starred_url":"https://api.github.com/users/factory-droid%5Bbot%5D/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/factory-droid%5Bbot%5D/subscriptions","organizations_url":"https://api.github.com/users/factory-droid%5Bbot%5D/orgs","repos_url":"https://api.github.com/users/factory-droid%5Bbot%5D/repos","events_url":"https://api.github.com/users/factory-droid%5Bbot%5D/events{/privacy}","received_events_url":"https://api.github.com/users/factory-droid%5Bbot%5D/received_events","type":"Bot","user_view_type":"public","site_admin":false},"body":"[P1] Persisting only the first destination calendar drops other hosts\n\n`connect: { id: evt.destinationCalendar[0].id }` writes only the first destination calendar even though `evt.destinationCalendar` is populated with multiple host calendars for COLLECTIVE, so subsequent flows reading `booking.destinationCalendar` will lose the additional destinations.","created_at":"2026-01-16T19:46:18Z","updated_at":"2026-01-16T19:46:18Z","html_url":"https://github.com/droid-code-review-evals/droid-cal_dot_com/pull/3#discussion_r2699763801","pull_request_url":"https://api.github.com/repos/droid-code-review-evals/droid-cal_dot_com/pulls/3","_links":{"self":{"href":"https://api.github.com/repos/droid-code-review-evals/droid-cal_dot_com/pulls/comments/2699763801"},"html":{"href":"https://github.com/droid-code-review-evals/droid-cal_dot_com/pull/3#discussion_r2699763801"},"pull_request":{"href":"https://api.github.com/repos/droid-code-review-evals/droid-cal_dot_com/pulls/3"}},"reactions":{"url":"https://api.github.com/repos/droid-code-review-evals/droid-cal_dot_com/pulls/comments/2699763801/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"start_line":null,"original_start_line":null,"start_side":null,"line":1878,"original_line":1878,"side":"RIGHT","author_association":"NONE","original_position":179,"position":179,"subject_type":"line"}]