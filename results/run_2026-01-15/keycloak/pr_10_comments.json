[{"url":"https://api.github.com/repos/droid-code-review-evals/droid-keycloak/pulls/comments/2699750677","pull_request_review_id":3672446673,"id":2699750677,"node_id":"PRRC_kwDOQ4pSo86g6u0V","diff_hunk":"@@ -271,7 +271,8 @@ public Stream<GroupModel> getSubGroupsStream(String search, Boolean exact, Integ\n     @Override\n     public Long getSubGroupsCount() {\n         if (isUpdated()) return updated.getSubGroupsCount();\n-        return getGroupModel().getSubGroupsCount();\n+        GroupModel model = modelSupplier.get();\n+        return model == null ? null : model.getSubGroupsCount();","path":"model/infinispan/src/main/java/org/keycloak/models/cache/infinispan/GroupAdapter.java","commit_id":"332c9b6e4a1288705f173a9b797742859384d1e0","original_commit_id":"332c9b6e4a1288705f173a9b797742859384d1e0","user":{"login":"factory-droid[bot]","id":138933559,"node_id":"BOT_kgDOCEf1Nw","avatar_url":"https://avatars.githubusercontent.com/in/358017?v=4","gravatar_id":"","url":"https://api.github.com/users/factory-droid%5Bbot%5D","html_url":"https://github.com/apps/factory-droid","followers_url":"https://api.github.com/users/factory-droid%5Bbot%5D/followers","following_url":"https://api.github.com/users/factory-droid%5Bbot%5D/following{/other_user}","gists_url":"https://api.github.com/users/factory-droid%5Bbot%5D/gists{/gist_id}","starred_url":"https://api.github.com/users/factory-droid%5Bbot%5D/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/factory-droid%5Bbot%5D/subscriptions","organizations_url":"https://api.github.com/users/factory-droid%5Bbot%5D/orgs","repos_url":"https://api.github.com/users/factory-droid%5Bbot%5D/repos","events_url":"https://api.github.com/users/factory-droid%5Bbot%5D/events{/privacy}","received_events_url":"https://api.github.com/users/factory-droid%5Bbot%5D/received_events","type":"Bot","user_view_type":"public","site_admin":false},"body":"**[P1] Do not return null from `getSubGroupsCount()`**\n\n`GroupModel#getSubGroupsCount()` is documented as “Never returns null”; returning `null` here can trigger NPEs in callers like `GroupUtils.populateSubGroupCount()` / serializers that expect a `Long` value.","created_at":"2026-01-16T19:41:23Z","updated_at":"2026-01-16T19:41:23Z","html_url":"https://github.com/droid-code-review-evals/droid-keycloak/pull/10#discussion_r2699750677","pull_request_url":"https://api.github.com/repos/droid-code-review-evals/droid-keycloak/pulls/10","_links":{"self":{"href":"https://api.github.com/repos/droid-code-review-evals/droid-keycloak/pulls/comments/2699750677"},"html":{"href":"https://github.com/droid-code-review-evals/droid-keycloak/pull/10#discussion_r2699750677"},"pull_request":{"href":"https://api.github.com/repos/droid-code-review-evals/droid-keycloak/pulls/10"}},"reactions":{"url":"https://api.github.com/repos/droid-code-review-evals/droid-keycloak/pulls/comments/2699750677/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"start_line":null,"original_start_line":null,"start_side":null,"line":275,"original_line":275,"side":"RIGHT","author_association":"NONE","original_position":6,"position":6,"subject_type":"line"},{"url":"https://api.github.com/repos/droid-code-review-evals/droid-keycloak/pulls/comments/2699750912","pull_request_review_id":3672446982,"id":2699750912,"node_id":"PRRC_kwDOQ4pSo86g6u4A","diff_hunk":"@@ -109,6 +114,49 @@ public class GroupTest extends AbstractGroupTest {\n     @InjectHttpClient\n     CloseableHttpClient httpClient;\n \n+    \n+    @Test\n+    public void createMultiDeleteMultiReadMulti() {\n+        // create multiple groups\n+        List<String> groupUuuids = new ArrayList<>();\n+        IntStream.range(0, 100).forEach(groupIndex -> {\n+            GroupRepresentation group = new GroupRepresentation();\n+            group.setName(\"Test Group \" + groupIndex);\n+            try (Response response = managedRealm.admin().groups().add(group)) {\n+                boolean created = response.getStatusInfo().getFamily() == Response.Status.Family.SUCCESSFUL;\n+                if (created) {\n+                    final String groupUuid = ApiUtil.getCreatedId(response);\n+                    groupUuuids.add(groupUuid);\n+                } else {\n+                    fail(\"Failed to create group: \" + response.getStatusInfo().getReasonPhrase());\n+                }\n+            }\n+        });\n+\n+        AtomicBoolean deletedAll = new AtomicBoolean(false);\n+        List<Exception> caughtExceptions = new CopyOnWriteArrayList<>();\n+        // read groups in a separate thread","path":"tests/base/src/test/java/org/keycloak/tests/admin/group/GroupTest.java","commit_id":"332c9b6e4a1288705f173a9b797742859384d1e0","original_commit_id":"332c9b6e4a1288705f173a9b797742859384d1e0","user":{"login":"factory-droid[bot]","id":138933559,"node_id":"BOT_kgDOCEf1Nw","avatar_url":"https://avatars.githubusercontent.com/in/358017?v=4","gravatar_id":"","url":"https://api.github.com/users/factory-droid%5Bbot%5D","html_url":"https://github.com/apps/factory-droid","followers_url":"https://api.github.com/users/factory-droid%5Bbot%5D/followers","following_url":"https://api.github.com/users/factory-droid%5Bbot%5D/following{/other_user}","gists_url":"https://api.github.com/users/factory-droid%5Bbot%5D/gists{/gist_id}","starred_url":"https://api.github.com/users/factory-droid%5Bbot%5D/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/factory-droid%5Bbot%5D/subscriptions","organizations_url":"https://api.github.com/users/factory-droid%5Bbot%5D/orgs","repos_url":"https://api.github.com/users/factory-droid%5Bbot%5D/repos","events_url":"https://api.github.com/users/factory-droid%5Bbot%5D/events{/privacy}","received_events_url":"https://api.github.com/users/factory-droid%5Bbot%5D/received_events","type":"Bot","user_view_type":"public","site_admin":false},"body":"**[P2] Ensure the reader thread terminates and exceptions are observed**\n\nThis thread is never `join()`ed, so the test can finish before `caughtExceptions` is fully populated (or can keep running past test end), making the assertion flaky/non-deterministic.","created_at":"2026-01-16T19:41:27Z","updated_at":"2026-01-16T19:41:27Z","html_url":"https://github.com/droid-code-review-evals/droid-keycloak/pull/10#discussion_r2699750912","pull_request_url":"https://api.github.com/repos/droid-code-review-evals/droid-keycloak/pulls/10","_links":{"self":{"href":"https://api.github.com/repos/droid-code-review-evals/droid-keycloak/pulls/comments/2699750912"},"html":{"href":"https://github.com/droid-code-review-evals/droid-keycloak/pull/10#discussion_r2699750912"},"pull_request":{"href":"https://api.github.com/repos/droid-code-review-evals/droid-keycloak/pulls/10"}},"reactions":{"url":"https://api.github.com/repos/droid-code-review-evals/droid-keycloak/pulls/comments/2699750912/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"start_line":null,"original_start_line":null,"start_side":null,"line":138,"original_line":138,"side":"RIGHT","author_association":"NONE","original_position":51,"position":51,"subject_type":"line"}]