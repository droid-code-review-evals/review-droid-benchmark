[{"url":"https://api.github.com/repos/droid-code-review-evals/droid-keycloak/pulls/comments/2699749823","pull_request_review_id":3672445164,"id":2699749823,"node_id":"PRRC_kwDOQ4pSo86g6um_","diff_hunk":"@@ -0,0 +1,287 @@\n+/*\n+ * Copyright 2025 Red Hat, Inc. and/or its affiliates\n+ * and other contributors as indicated by the @author tags.\n+ *\n+ * Licensed under the Apache License, Version 2.0 (the \"License\");\n+ * you may not use this file except in compliance with the License.\n+ * You may obtain a copy of the License at\n+ *\n+ * http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+package org.keycloak.services.resources.admin.permissions;\n+\n+import org.jboss.logging.Logger;\n+import org.keycloak.authorization.AdminPermissionsSchema;\n+import org.keycloak.authorization.AuthorizationProvider;\n+import org.keycloak.authorization.common.ClientModelIdentity;\n+import org.keycloak.authorization.common.DefaultEvaluationContext;\n+import org.keycloak.authorization.model.Policy;\n+import org.keycloak.authorization.model.Resource;\n+import org.keycloak.authorization.model.ResourceServer;\n+import org.keycloak.authorization.model.Scope;\n+import org.keycloak.authorization.permission.ResourcePermission;\n+import org.keycloak.authorization.policy.evaluation.EvaluationContext;\n+import org.keycloak.models.AdminRoles;\n+import org.keycloak.models.ClientModel;\n+import org.keycloak.models.ClientScopeModel;\n+import org.keycloak.models.KeycloakSession;\n+import org.keycloak.models.RealmModel;\n+import org.keycloak.representations.AccessToken;\n+import org.keycloak.representations.idm.authorization.Permission;\n+\n+import java.util.Arrays;\n+import java.util.Collection;\n+import java.util.Collections;\n+import java.util.HashSet;\n+import java.util.List;\n+import java.util.Map;\n+import java.util.Set;\n+\n+import static org.keycloak.services.resources.admin.permissions.AdminPermissionManagement.TOKEN_EXCHANGE;\n+\n+\n+public class ClientPermissionsV2 extends ClientPermissions {\n+\n+    private static final Logger logger = Logger.getLogger(ClientPermissionsV2.class);\n+\n+    public ClientPermissionsV2(KeycloakSession session, RealmModel realm, AuthorizationProvider authz, MgmtPermissionsV2 root) {\n+        super(session, realm, authz, root);\n+    }\n+\n+    @Override\n+    public boolean canConfigure(ClientModel client) {\n+        if (canManage(client)) return true;\n+\n+        return hasPermission(client, AdminPermissionsSchema.CONFIGURE);\n+    }\n+\n+    @Override\n+    public boolean canManage(ClientModel client) {\n+        if (root.hasOneAdminRole(AdminRoles.MANAGE_CLIENTS)) return true;\n+\n+        return hasPermission(client, AdminPermissionsSchema.MANAGE);\n+    }\n+\n+    @Override\n+    public boolean canManage() {\n+        return super.canManage() || hasPermission(AdminPermissionsSchema.MANAGE);\n+    }\n+\n+    @Override\n+    public boolean canView(ClientModel client) {\n+        if (canView() || canConfigure(client)) {\n+            return true;\n+        }\n+\n+        return hasPermission(client, AdminPermissionsSchema.VIEW);\n+    }\n+\n+    @Override\n+    public boolean canView() {\n+        return canViewClientDefault() || hasPermission(AdminPermissionsSchema.VIEW);\n+    }\n+\n+    @Override\n+    public boolean canMapRoles(ClientModel client) {\n+        return hasPermission(client, AdminPermissionsSchema.MAP_ROLES);\n+    }\n+\n+    @Override\n+    public boolean canMapCompositeRoles(ClientModel client) {\n+        return hasPermission(client, AdminPermissionsSchema.MAP_ROLES_COMPOSITE);\n+    }\n+\n+    @Override\n+    public boolean canMapClientScopeRoles(ClientModel client) {\n+        return hasPermission(client, AdminPermissionsSchema.MAP_ROLES_CLIENT_SCOPE);\n+    }\n+\n+    @Override\n+    public boolean canManageClientScopes() {\n+        if (root.hasOneAdminRole(AdminRoles.MANAGE_CLIENTS)) return true;\n+","path":"services/src/main/java/org/keycloak/services/resources/admin/permissions/ClientPermissionsV2.java","commit_id":"7e5540896bbbafc02234b6ea2b15215dc24cb972","original_commit_id":"7e5540896bbbafc02234b6ea2b15215dc24cb972","user":{"login":"factory-droid[bot]","id":138933559,"node_id":"BOT_kgDOCEf1Nw","avatar_url":"https://avatars.githubusercontent.com/in/358017?v=4","gravatar_id":"","url":"https://api.github.com/users/factory-droid%5Bbot%5D","html_url":"https://github.com/apps/factory-droid","followers_url":"https://api.github.com/users/factory-droid%5Bbot%5D/followers","following_url":"https://api.github.com/users/factory-droid%5Bbot%5D/following{/other_user}","gists_url":"https://api.github.com/users/factory-droid%5Bbot%5D/gists{/gist_id}","starred_url":"https://api.github.com/users/factory-droid%5Bbot%5D/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/factory-droid%5Bbot%5D/subscriptions","organizations_url":"https://api.github.com/users/factory-droid%5Bbot%5D/orgs","repos_url":"https://api.github.com/users/factory-droid%5Bbot%5D/repos","events_url":"https://api.github.com/users/factory-droid%5Bbot%5D/events{/privacy}","received_events_url":"https://api.github.com/users/factory-droid%5Bbot%5D/received_events","type":"Bot","user_view_type":"public","site_admin":false},"body":"**[P0] Fix client ID extraction in getClientsWithPermission**\n\n`granted.add(resource.getName())` returns the resource *name* (likely the client UUID / resource name), but callers expect a clientId like V1 returns via `substring(RESOURCE_NAME_PREFIX.length())`. This will break any code consuming `getClientsWithPermission()` (wrong identifiers, lookups fail).","created_at":"2026-01-16T19:41:02Z","updated_at":"2026-01-16T19:41:02Z","html_url":"https://github.com/droid-code-review-evals/droid-keycloak/pull/5#discussion_r2699749823","pull_request_url":"https://api.github.com/repos/droid-code-review-evals/droid-keycloak/pulls/5","_links":{"self":{"href":"https://api.github.com/repos/droid-code-review-evals/droid-keycloak/pulls/comments/2699749823"},"html":{"href":"https://github.com/droid-code-review-evals/droid-keycloak/pull/5#discussion_r2699749823"},"pull_request":{"href":"https://api.github.com/repos/droid-code-review-evals/droid-keycloak/pulls/5"}},"reactions":{"url":"https://api.github.com/repos/droid-code-review-evals/droid-keycloak/pulls/comments/2699749823/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"start_line":null,"original_start_line":null,"start_side":null,"line":108,"original_line":108,"side":"RIGHT","author_association":"NONE","original_position":108,"position":108,"subject_type":"line"},{"url":"https://api.github.com/repos/droid-code-review-evals/droid-keycloak/pulls/comments/2699750109","pull_request_review_id":3672445491,"id":2699750109,"node_id":"PRRC_kwDOQ4pSo86g6urd","diff_hunk":"@@ -0,0 +1,287 @@\n+/*\n+ * Copyright 2025 Red Hat, Inc. and/or its affiliates\n+ * and other contributors as indicated by the @author tags.\n+ *\n+ * Licensed under the Apache License, Version 2.0 (the \"License\");\n+ * you may not use this file except in compliance with the License.\n+ * You may obtain a copy of the License at\n+ *\n+ * http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+package org.keycloak.services.resources.admin.permissions;\n+\n+import org.jboss.logging.Logger;\n+import org.keycloak.authorization.AdminPermissionsSchema;\n+import org.keycloak.authorization.AuthorizationProvider;\n+import org.keycloak.authorization.common.ClientModelIdentity;\n+import org.keycloak.authorization.common.DefaultEvaluationContext;\n+import org.keycloak.authorization.model.Policy;\n+import org.keycloak.authorization.model.Resource;\n+import org.keycloak.authorization.model.ResourceServer;\n+import org.keycloak.authorization.model.Scope;\n+import org.keycloak.authorization.permission.ResourcePermission;\n+import org.keycloak.authorization.policy.evaluation.EvaluationContext;\n+import org.keycloak.models.AdminRoles;\n+import org.keycloak.models.ClientModel;\n+import org.keycloak.models.ClientScopeModel;\n+import org.keycloak.models.KeycloakSession;\n+import org.keycloak.models.RealmModel;\n+import org.keycloak.representations.AccessToken;\n+import org.keycloak.representations.idm.authorization.Permission;\n+\n+import java.util.Arrays;\n+import java.util.Collection;\n+import java.util.Collections;\n+import java.util.HashSet;\n+import java.util.List;\n+import java.util.Map;\n+import java.util.Set;\n+\n+import static org.keycloak.services.resources.admin.permissions.AdminPermissionManagement.TOKEN_EXCHANGE;\n+\n+\n+public class ClientPermissionsV2 extends ClientPermissions {\n+\n+    private static final Logger logger = Logger.getLogger(ClientPermissionsV2.class);\n+\n+    public ClientPermissionsV2(KeycloakSession session, RealmModel realm, AuthorizationProvider authz, MgmtPermissionsV2 root) {\n+        super(session, realm, authz, root);\n+    }\n+\n+    @Override\n+    public boolean canConfigure(ClientModel client) {\n+        if (canManage(client)) return true;\n+\n+        return hasPermission(client, AdminPermissionsSchema.CONFIGURE);\n+    }\n+\n+    @Override\n+    public boolean canManage(ClientModel client) {\n+        if (root.hasOneAdminRole(AdminRoles.MANAGE_CLIENTS)) return true;\n+\n+        return hasPermission(client, AdminPermissionsSchema.MANAGE);\n+    }\n+\n+    @Override\n+    public boolean canManage() {\n+        return super.canManage() || hasPermission(AdminPermissionsSchema.MANAGE);\n+    }\n+\n+    @Override\n+    public boolean canView(ClientModel client) {\n+        if (canView() || canConfigure(client)) {\n+            return true;\n+        }\n+\n+        return hasPermission(client, AdminPermissionsSchema.VIEW);\n+    }\n+\n+    @Override","path":"services/src/main/java/org/keycloak/services/resources/admin/permissions/ClientPermissionsV2.java","commit_id":"7e5540896bbbafc02234b6ea2b15215dc24cb972","original_commit_id":"7e5540896bbbafc02234b6ea2b15215dc24cb972","user":{"login":"factory-droid[bot]","id":138933559,"node_id":"BOT_kgDOCEf1Nw","avatar_url":"https://avatars.githubusercontent.com/in/358017?v=4","gravatar_id":"","url":"https://api.github.com/users/factory-droid%5Bbot%5D","html_url":"https://github.com/apps/factory-droid","followers_url":"https://api.github.com/users/factory-droid%5Bbot%5D/followers","following_url":"https://api.github.com/users/factory-droid%5Bbot%5D/following{/other_user}","gists_url":"https://api.github.com/users/factory-droid%5Bbot%5D/gists{/gist_id}","starred_url":"https://api.github.com/users/factory-droid%5Bbot%5D/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/factory-droid%5Bbot%5D/subscriptions","organizations_url":"https://api.github.com/users/factory-droid%5Bbot%5D/orgs","repos_url":"https://api.github.com/users/factory-droid%5Bbot%5D/repos","events_url":"https://api.github.com/users/factory-droid%5Bbot%5D/events{/privacy}","received_events_url":"https://api.github.com/users/factory-droid%5Bbot%5D/received_events","type":"Bot","user_view_type":"public","site_admin":false},"body":"**[P0] Match resource type lookup key for all-clients permissions**\n\nThis uses `findByName(server, AdminPermissionsSchema.CLIENTS_RESOURCE_TYPE, ...)`, but your `getOrCreateResource` path creates a resource with `name=resolveClient(id)` (client UUID) and only sets `type` to `Clients`. If the all-clients resource is named differently (often `\"Clients\"`), this lookup will return null and silently deny `canView()/canManage()` for V2 even when all-clients permissions exist.","created_at":"2026-01-16T19:41:08Z","updated_at":"2026-01-16T19:41:08Z","html_url":"https://github.com/droid-code-review-evals/droid-keycloak/pull/5#discussion_r2699750109","pull_request_url":"https://api.github.com/repos/droid-code-review-evals/droid-keycloak/pulls/5","_links":{"self":{"href":"https://api.github.com/repos/droid-code-review-evals/droid-keycloak/pulls/comments/2699750109"},"html":{"href":"https://github.com/droid-code-review-evals/droid-keycloak/pull/5#discussion_r2699750109"},"pull_request":{"href":"https://api.github.com/repos/droid-code-review-evals/droid-keycloak/pulls/5"}},"reactions":{"url":"https://api.github.com/repos/droid-code-review-evals/droid-keycloak/pulls/comments/2699750109/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"start_line":null,"original_start_line":null,"start_side":null,"line":85,"original_line":85,"side":"RIGHT","author_association":"NONE","original_position":85,"position":85,"subject_type":"line"},{"url":"https://api.github.com/repos/droid-code-review-evals/droid-keycloak/pulls/comments/2699750266","pull_request_review_id":3672445798,"id":2699750266,"node_id":"PRRC_kwDOQ4pSo86g6ut6","diff_hunk":"@@ -0,0 +1,287 @@\n+/*\n+ * Copyright 2025 Red Hat, Inc. and/or its affiliates\n+ * and other contributors as indicated by the @author tags.\n+ *\n+ * Licensed under the Apache License, Version 2.0 (the \"License\");\n+ * you may not use this file except in compliance with the License.\n+ * You may obtain a copy of the License at\n+ *\n+ * http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+package org.keycloak.services.resources.admin.permissions;\n+\n+import org.jboss.logging.Logger;\n+import org.keycloak.authorization.AdminPermissionsSchema;\n+import org.keycloak.authorization.AuthorizationProvider;\n+import org.keycloak.authorization.common.ClientModelIdentity;\n+import org.keycloak.authorization.common.DefaultEvaluationContext;\n+import org.keycloak.authorization.model.Policy;\n+import org.keycloak.authorization.model.Resource;\n+import org.keycloak.authorization.model.ResourceServer;\n+import org.keycloak.authorization.model.Scope;\n+import org.keycloak.authorization.permission.ResourcePermission;\n+import org.keycloak.authorization.policy.evaluation.EvaluationContext;\n+import org.keycloak.models.AdminRoles;\n+import org.keycloak.models.ClientModel;\n+import org.keycloak.models.ClientScopeModel;\n+import org.keycloak.models.KeycloakSession;\n+import org.keycloak.models.RealmModel;\n+import org.keycloak.representations.AccessToken;\n+import org.keycloak.representations.idm.authorization.Permission;\n+\n+import java.util.Arrays;\n+import java.util.Collection;\n+import java.util.Collections;\n+import java.util.HashSet;\n+import java.util.List;\n+import java.util.Map;\n+import java.util.Set;\n+\n+import static org.keycloak.services.resources.admin.permissions.AdminPermissionManagement.TOKEN_EXCHANGE;\n+\n+\n+public class ClientPermissionsV2 extends ClientPermissions {\n+\n+    private static final Logger logger = Logger.getLogger(ClientPermissionsV2.class);\n+\n+    public ClientPermissionsV2(KeycloakSession session, RealmModel realm, AuthorizationProvider authz, MgmtPermissionsV2 root) {\n+        super(session, realm, authz, root);\n+    }\n+\n+    @Override\n+    public boolean canConfigure(ClientModel client) {\n+        if (canManage(client)) return true;\n+\n+        return hasPermission(client, AdminPermissionsSchema.CONFIGURE);\n+    }\n+\n+    @Override\n+    public boolean canManage(ClientModel client) {\n+        if (root.hasOneAdminRole(AdminRoles.MANAGE_CLIENTS)) return true;\n+\n+        return hasPermission(client, AdminPermissionsSchema.MANAGE);\n+    }\n+\n+    @Override\n+    public boolean canManage() {\n+        return super.canManage() || hasPermission(AdminPermissionsSchema.MANAGE);\n+    }\n+\n+    @Override\n+    public boolean canView(ClientModel client) {\n+        if (canView() || canConfigure(client)) {\n+            return true;\n+        }\n+\n+        return hasPermission(client, AdminPermissionsSchema.VIEW);\n+    }\n+\n+    @Override\n+    public boolean canView() {\n+        return canViewClientDefault() || hasPermission(AdminPermissionsSchema.VIEW);\n+    }\n+\n+    @Override\n+    public boolean canMapRoles(ClientModel client) {\n+        return hasPermission(client, AdminPermissionsSchema.MAP_ROLES);\n+    }\n+\n+    @Override\n+    public boolean canMapCompositeRoles(ClientModel client) {\n+        return hasPermission(client, AdminPermissionsSchema.MAP_ROLES_COMPOSITE);\n+    }\n+\n+    @Override\n+    public boolean canMapClientScopeRoles(ClientModel client) {\n+        return hasPermission(client, AdminPermissionsSchema.MAP_ROLES_CLIENT_SCOPE);\n+    }\n+\n+    @Override\n+    public boolean canManageClientScopes() {\n+        if (root.hasOneAdminRole(AdminRoles.MANAGE_CLIENTS)) return true;\n+\n+        return hasPermission(AdminPermissionsSchema.MANAGE);\n+    }\n+\n+    @Override\n+    public boolean canManage(ClientScopeModel clientScope) {\n+        return canManageClientScopes();\n+    }\n+\n+    @Override\n+    public boolean canView(ClientScopeModel clientScope) {\n+        if (root.hasOneAdminRole(AdminRoles.VIEW_CLIENTS, AdminRoles.MANAGE_CLIENTS)) return true;\n+\n+        return hasPermission(AdminPermissionsSchema.VIEW) || hasPermission(AdminPermissionsSchema.MANAGE);\n+    }\n+\n+    @Override\n+    public Set<String> getClientsWithPermission(String scope) {\n+        if (!root.isAdminSameRealm()) {\n+            return Collections.emptySet();\n+        }\n+\n+        ResourceServer server = root.realmResourceServer();\n+\n+        if (server == null) {\n+            return Collections.emptySet();\n+        }\n+\n+        Set<String> granted = new HashSet<>();\n+\n+        resourceStore.findByType(server, AdminPermissionsSchema.CLIENTS_RESOURCE_TYPE, resource -> {\n+            if (hasGrantedPermission(resource, scope)) {\n+                granted.add(resource.getName());\n+            }\n+        });","path":"services/src/main/java/org/keycloak/services/resources/admin/permissions/ClientPermissionsV2.java","commit_id":"7e5540896bbbafc02234b6ea2b15215dc24cb972","original_commit_id":"7e5540896bbbafc02234b6ea2b15215dc24cb972","user":{"login":"factory-droid[bot]","id":138933559,"node_id":"BOT_kgDOCEf1Nw","avatar_url":"https://avatars.githubusercontent.com/in/358017?v=4","gravatar_id":"","url":"https://api.github.com/users/factory-droid%5Bbot%5D","html_url":"https://github.com/apps/factory-droid","followers_url":"https://api.github.com/users/factory-droid%5Bbot%5D/followers","following_url":"https://api.github.com/users/factory-droid%5Bbot%5D/following{/other_user}","gists_url":"https://api.github.com/users/factory-droid%5Bbot%5D/gists{/gist_id}","starred_url":"https://api.github.com/users/factory-droid%5Bbot%5D/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/factory-droid%5Bbot%5D/subscriptions","organizations_url":"https://api.github.com/users/factory-droid%5Bbot%5D/orgs","repos_url":"https://api.github.com/users/factory-droid%5Bbot%5D/repos","events_url":"https://api.github.com/users/factory-droid%5Bbot%5D/events{/privacy}","received_events_url":"https://api.github.com/users/factory-droid%5Bbot%5D/received_events","type":"Bot","user_view_type":"public","site_admin":false},"body":"**[P1] Guard against null resource from getResourceTypeResource()**\n\nIf `getResourceTypeResource(...)` returns null (e.g., resource type not provisioned yet), `findByResource(server, resource)` will NPE. This is a new trigger path when a realm has no clients resource-type resource but V2 permission checks run.","created_at":"2026-01-16T19:41:13Z","updated_at":"2026-01-16T19:41:13Z","html_url":"https://github.com/droid-code-review-evals/droid-keycloak/pull/5#discussion_r2699750266","pull_request_url":"https://api.github.com/repos/droid-code-review-evals/droid-keycloak/pulls/5","_links":{"self":{"href":"https://api.github.com/repos/droid-code-review-evals/droid-keycloak/pulls/comments/2699750266"},"html":{"href":"https://github.com/droid-code-review-evals/droid-keycloak/pull/5#discussion_r2699750266"},"pull_request":{"href":"https://api.github.com/repos/droid-code-review-evals/droid-keycloak/pulls/5"}},"reactions":{"url":"https://api.github.com/repos/droid-code-review-evals/droid-keycloak/pulls/comments/2699750266/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"start_line":null,"original_start_line":null,"start_side":null,"line":142,"original_line":142,"side":"RIGHT","author_association":"NONE","original_position":142,"position":142,"subject_type":"line"},{"url":"https://api.github.com/repos/droid-code-review-evals/droid-keycloak/pulls/comments/2699750420","pull_request_review_id":3672446181,"id":2699750420,"node_id":"PRRC_kwDOQ4pSo86g6uwU","diff_hunk":"@@ -37,19 +59,37 @@\n import org.keycloak.representations.idm.authorization.RolePolicyRepresentation;\n import org.keycloak.representations.idm.authorization.TimePolicyRepresentation;\n import org.keycloak.representations.idm.authorization.UserPolicyRepresentation;\n+import org.keycloak.testframework.annotations.InjectAdminClient;\n+import org.keycloak.testframework.annotations.InjectClient;\n import org.keycloak.testframework.annotations.KeycloakIntegrationTest;\n+import org.keycloak.testframework.realm.ManagedClient;\n \n @KeycloakIntegrationTest(config = KeycloakAdminPermissionsServerConfig.class)\n public class PermissionClientTest extends AbstractPermissionTest {\n \n+    @InjectAdminClient(mode = InjectAdminClient.Mode.MANAGED_REALM, client = \"myclient\", user = \"myadmin\")\n+    Keycloak realmAdminClient;\n+\n+    @InjectClient(ref = \"realmClient\")\n+    ManagedClient realmClient;\n+\n+    private final String clientsType = AdminPermissionsSchema.CLIENTS.getType();\n+\n+    @AfterEach\n+    public void onAfter() {","path":"tests/base/src/test/java/org/keycloak/tests/admin/authz/fgap/PermissionClientTest.java","commit_id":"7e5540896bbbafc02234b6ea2b15215dc24cb972","original_commit_id":"7e5540896bbbafc02234b6ea2b15215dc24cb972","user":{"login":"factory-droid[bot]","id":138933559,"node_id":"BOT_kgDOCEf1Nw","avatar_url":"https://avatars.githubusercontent.com/in/358017?v=4","gravatar_id":"","url":"https://api.github.com/users/factory-droid%5Bbot%5D","html_url":"https://github.com/apps/factory-droid","followers_url":"https://api.github.com/users/factory-droid%5Bbot%5D/followers","following_url":"https://api.github.com/users/factory-droid%5Bbot%5D/following{/other_user}","gists_url":"https://api.github.com/users/factory-droid%5Bbot%5D/gists{/gist_id}","starred_url":"https://api.github.com/users/factory-droid%5Bbot%5D/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/factory-droid%5Bbot%5D/subscriptions","organizations_url":"https://api.github.com/users/factory-droid%5Bbot%5D/orgs","repos_url":"https://api.github.com/users/factory-droid%5Bbot%5D/repos","events_url":"https://api.github.com/users/factory-droid%5Bbot%5D/events{/privacy}","received_events_url":"https://api.github.com/users/factory-droid%5Bbot%5D/received_events","type":"Bot","user_view_type":"public","site_admin":false},"body":"**[P1] Donâ€™t assume at least 2 default client scopes**\n\n`clientResource.getDefaultClientScopes().get(1)` will throw `IndexOutOfBoundsException` in realms where the default client scopes list has <2 entries (this can vary with test config). This makes the test suite flaky/failing unrelated to authz behavior.","created_at":"2026-01-16T19:41:17Z","updated_at":"2026-01-16T19:41:17Z","html_url":"https://github.com/droid-code-review-evals/droid-keycloak/pull/5#discussion_r2699750420","pull_request_url":"https://api.github.com/repos/droid-code-review-evals/droid-keycloak/pulls/5","_links":{"self":{"href":"https://api.github.com/repos/droid-code-review-evals/droid-keycloak/pulls/comments/2699750420"},"html":{"href":"https://github.com/droid-code-review-evals/droid-keycloak/pull/5#discussion_r2699750420"},"pull_request":{"href":"https://api.github.com/repos/droid-code-review-evals/droid-keycloak/pulls/5"}},"reactions":{"url":"https://api.github.com/repos/droid-code-review-evals/droid-keycloak/pulls/comments/2699750420/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"start_line":null,"original_start_line":null,"start_side":null,"line":79,"original_line":79,"side":"RIGHT","author_association":"NONE","original_position":57,"position":57,"subject_type":"line"}]