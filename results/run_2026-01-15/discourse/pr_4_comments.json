[{"url":"https://api.github.com/repos/droid-code-review-evals/droid-discourse/pulls/comments/2699755111","pull_request_review_id":3672452426,"id":2699755111,"node_id":"PRRC_kwDOQ4pSzs6g6v5n","diff_hunk":"@@ -0,0 +1,27 @@\n+/* global discourseUrl */\n+/* global discourseEmbedUrl */\n+(function() {\n+\n+  var comments = document.getElementById('discourse-comments'),\n+      iframe = document.createElement('iframe');\n+  iframe.src = discourseUrl + \"embed/best?embed_url=\" + encodeURIComponent(discourseEmbedUrl);\n+  iframe.id = 'discourse-embed-frame';\n+  iframe.width = \"100%\";\n+  iframe.frameBorder = \"0\";\n+  iframe.scrolling = \"no\";\n+  comments.appendChild(iframe);\n+\n+\n+  function postMessageReceived(e) {\n+    if (!e) { return; }","path":"app/assets/javascripts/embed.js","commit_id":"4f8aed295a29954023b2849c060ef4fb299d1b5d","original_commit_id":"4f8aed295a29954023b2849c060ef4fb299d1b5d","user":{"login":"factory-droid[bot]","id":138933559,"node_id":"BOT_kgDOCEf1Nw","avatar_url":"https://avatars.githubusercontent.com/in/358017?v=4","gravatar_id":"","url":"https://api.github.com/users/factory-droid%5Bbot%5D","html_url":"https://github.com/apps/factory-droid","followers_url":"https://api.github.com/users/factory-droid%5Bbot%5D/followers","following_url":"https://api.github.com/users/factory-droid%5Bbot%5D/following{/other_user}","gists_url":"https://api.github.com/users/factory-droid%5Bbot%5D/gists{/gist_id}","starred_url":"https://api.github.com/users/factory-droid%5Bbot%5D/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/factory-droid%5Bbot%5D/subscriptions","organizations_url":"https://api.github.com/users/factory-droid%5Bbot%5D/orgs","repos_url":"https://api.github.com/users/factory-droid%5Bbot%5D/repos","events_url":"https://api.github.com/users/factory-droid%5Bbot%5D/events{/privacy}","received_events_url":"https://api.github.com/users/factory-droid%5Bbot%5D/received_events","type":"Bot","user_view_type":"public","site_admin":false},"body":"**[P1] Fix origin check to avoid bypass via substring match**\n\n`discourseUrl.indexOf(e.origin) === -1` can be bypassed by an attacker origin that is a substring of `discourseUrl` (or vice versa), allowing arbitrary `postMessage` resize events to be accepted. Compare normalized origins exactly (e.g., `new URL(discourseUrl).origin === e.origin`).","created_at":"2026-01-16T19:43:02Z","updated_at":"2026-01-16T19:43:03Z","html_url":"https://github.com/droid-code-review-evals/droid-discourse/pull/4#discussion_r2699755111","pull_request_url":"https://api.github.com/repos/droid-code-review-evals/droid-discourse/pulls/4","_links":{"self":{"href":"https://api.github.com/repos/droid-code-review-evals/droid-discourse/pulls/comments/2699755111"},"html":{"href":"https://github.com/droid-code-review-evals/droid-discourse/pull/4#discussion_r2699755111"},"pull_request":{"href":"https://api.github.com/repos/droid-code-review-evals/droid-discourse/pulls/4"}},"reactions":{"url":"https://api.github.com/repos/droid-code-review-evals/droid-discourse/pulls/comments/2699755111/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"start_line":null,"original_start_line":null,"start_side":null,"line":16,"original_line":16,"side":"RIGHT","author_association":"NONE","original_position":16,"position":16,"subject_type":"line"},{"url":"https://api.github.com/repos/droid-code-review-evals/droid-discourse/pulls/comments/2699755342","pull_request_review_id":3672452648,"id":2699755342,"node_id":"PRRC_kwDOQ4pSzs6g6v9O","diff_hunk":"@@ -0,0 +1,34 @@\n+class EmbedController < ApplicationController\n+  skip_before_filter :check_xhr\n+  skip_before_filter :preload_json\n+  before_filter :ensure_embeddable\n+\n+  layout 'embed'\n+\n+  def best\n+    embed_url = params.require(:embed_url)\n+    topic_id = TopicEmbed.topic_id_for_embed(embed_url)\n+\n+    if topic_id\n+      @topic_view = TopicView.new(topic_id, current_user, {best: 5})\n+    else\n+      Jobs.enqueue(:retrieve_topic, user_id: current_user.try(:id), embed_url: embed_url)\n+      render 'loading'\n+    end\n+\n+    discourse_expires_in 1.minute\n+  end\n+\n+  private\n+\n+    def ensure_embeddable\n+      raise Discourse::InvalidAccess.new('embeddable host not set') if SiteSetting.embeddable_host.blank?\n+      raise Discourse::InvalidAccess.new('invalid referer host') if URI(request.referer || '').host != SiteSetting.embeddable_host","path":"app/controllers/embed_controller.rb","commit_id":"4f8aed295a29954023b2849c060ef4fb299d1b5d","original_commit_id":"4f8aed295a29954023b2849c060ef4fb299d1b5d","user":{"login":"factory-droid[bot]","id":138933559,"node_id":"BOT_kgDOCEf1Nw","avatar_url":"https://avatars.githubusercontent.com/in/358017?v=4","gravatar_id":"","url":"https://api.github.com/users/factory-droid%5Bbot%5D","html_url":"https://github.com/apps/factory-droid","followers_url":"https://api.github.com/users/factory-droid%5Bbot%5D/followers","following_url":"https://api.github.com/users/factory-droid%5Bbot%5D/following{/other_user}","gists_url":"https://api.github.com/users/factory-droid%5Bbot%5D/gists{/gist_id}","starred_url":"https://api.github.com/users/factory-droid%5Bbot%5D/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/factory-droid%5Bbot%5D/subscriptions","organizations_url":"https://api.github.com/users/factory-droid%5Bbot%5D/orgs","repos_url":"https://api.github.com/users/factory-droid%5Bbot%5D/repos","events_url":"https://api.github.com/users/factory-droid%5Bbot%5D/events{/privacy}","received_events_url":"https://api.github.com/users/factory-droid%5Bbot%5D/received_events","type":"Bot","user_view_type":"public","site_admin":false},"body":"**[P1] Don’t enforce referer host equality for embed_url requests**\n\n`ensure_embeddable` validates `request.referer` against `SiteSetting.embeddable_host`, but `best` takes `embed_url` as the canonical source. This breaks legitimate embeds when the embed page and content URL are on different hosts (common for CDNs/www vs apex), and can be trivially defeated if Referer is stripped; validate `URI(embed_url).host` (and/or use an allowlist) instead of relying on `Referer`.","created_at":"2026-01-16T19:43:08Z","updated_at":"2026-01-16T19:43:08Z","html_url":"https://github.com/droid-code-review-evals/droid-discourse/pull/4#discussion_r2699755342","pull_request_url":"https://api.github.com/repos/droid-code-review-evals/droid-discourse/pulls/4","_links":{"self":{"href":"https://api.github.com/repos/droid-code-review-evals/droid-discourse/pulls/comments/2699755342"},"html":{"href":"https://github.com/droid-code-review-evals/droid-discourse/pull/4#discussion_r2699755342"},"pull_request":{"href":"https://api.github.com/repos/droid-code-review-evals/droid-discourse/pulls/4"}},"reactions":{"url":"https://api.github.com/repos/droid-code-review-evals/droid-discourse/pulls/comments/2699755342/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"start_line":null,"original_start_line":null,"start_side":null,"line":26,"original_line":26,"side":"RIGHT","author_association":"NONE","original_position":26,"position":26,"subject_type":"line"},{"url":"https://api.github.com/repos/droid-code-review-evals/droid-discourse/pulls/comments/2699755529","pull_request_review_id":3672452844,"id":2699755529,"node_id":"PRRC_kwDOQ4pSzs6g6wAJ","diff_hunk":"@@ -0,0 +1,41 @@\n+#\n+# Creates and Updates Topics based on an RSS or ATOM feed.\n+#\n+require 'digest/sha1'\n+require_dependency 'post_creator'\n+require_dependency 'post_revisor'\n+require 'open-uri'\n+\n+module Jobs\n+  class PollFeed < Jobs::Scheduled\n+    recurrence { hourly }\n+    sidekiq_options retry: false\n+\n+    def execute(args)\n+      poll_feed if SiteSetting.feed_polling_enabled? &&\n+                   SiteSetting.feed_polling_url.present? &&\n+                   SiteSetting.embed_by_username.present?\n+    end\n+\n+    def feed_key\n+      @feed_key ||= \"feed-modified:#{Digest::SHA1.hexdigest(SiteSetting.feed_polling_url)}\"\n+    end\n+\n+    def poll_feed\n+      user = User.where(username_lower: SiteSetting.embed_by_username.downcase).first","path":"app/jobs/scheduled/poll_feed.rb","commit_id":"4f8aed295a29954023b2849c060ef4fb299d1b5d","original_commit_id":"4f8aed295a29954023b2849c060ef4fb299d1b5d","user":{"login":"factory-droid[bot]","id":138933559,"node_id":"BOT_kgDOCEf1Nw","avatar_url":"https://avatars.githubusercontent.com/in/358017?v=4","gravatar_id":"","url":"https://api.github.com/users/factory-droid%5Bbot%5D","html_url":"https://github.com/apps/factory-droid","followers_url":"https://api.github.com/users/factory-droid%5Bbot%5D/followers","following_url":"https://api.github.com/users/factory-droid%5Bbot%5D/following{/other_user}","gists_url":"https://api.github.com/users/factory-droid%5Bbot%5D/gists{/gist_id}","starred_url":"https://api.github.com/users/factory-droid%5Bbot%5D/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/factory-droid%5Bbot%5D/subscriptions","organizations_url":"https://api.github.com/users/factory-droid%5Bbot%5D/orgs","repos_url":"https://api.github.com/users/factory-droid%5Bbot%5D/repos","events_url":"https://api.github.com/users/factory-droid%5Bbot%5D/events{/privacy}","received_events_url":"https://api.github.com/users/factory-droid%5Bbot%5D/received_events","type":"Bot","user_view_type":"public","site_admin":false},"body":"**[P0] Prevent SSRF by restricting feed_polling_url fetch**\n\n`SimpleRSS.parse open(SiteSetting.feed_polling_url)` will fetch an arbitrary URL from a site setting without any host/IP allowlist, enabling SSRF to internal services (e.g., `http://169.254.169.254/` or `http://localhost`). Add explicit validation/allowlisting (and ideally disallow private IP ranges) before calling `open`.","created_at":"2026-01-16T19:43:12Z","updated_at":"2026-01-16T19:43:12Z","html_url":"https://github.com/droid-code-review-evals/droid-discourse/pull/4#discussion_r2699755529","pull_request_url":"https://api.github.com/repos/droid-code-review-evals/droid-discourse/pulls/4","_links":{"self":{"href":"https://api.github.com/repos/droid-code-review-evals/droid-discourse/pulls/comments/2699755529"},"html":{"href":"https://github.com/droid-code-review-evals/droid-discourse/pull/4#discussion_r2699755529"},"pull_request":{"href":"https://api.github.com/repos/droid-code-review-evals/droid-discourse/pulls/4"}},"reactions":{"url":"https://api.github.com/repos/droid-code-review-evals/droid-discourse/pulls/comments/2699755529/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"start_line":null,"original_start_line":null,"start_side":null,"line":25,"original_line":25,"side":"RIGHT","author_association":"NONE","original_position":25,"position":25,"subject_type":"line"},{"url":"https://api.github.com/repos/droid-code-review-evals/droid-discourse/pulls/comments/2699755725","pull_request_review_id":3672453048,"id":2699755725,"node_id":"PRRC_kwDOQ4pSzs6g6wDN","diff_hunk":"@@ -0,0 +1,82 @@\n+require_dependency 'nokogiri'\n+\n+class TopicEmbed < ActiveRecord::Base\n+  belongs_to :topic\n+  belongs_to :post\n+  validates_presence_of :embed_url\n+  validates_presence_of :content_sha1\n+\n+  # Import an article from a source (RSS/Atom/Other)\n+  def self.import(user, url, title, contents)\n+    return unless url =~ /^https?\\:\\/\\//\n+\n+    contents << \"\\n<hr>\\n<small>#{I18n.t('embed.imported_from', link: \"<a href='#{url}'>#{url}</a>\")}</small>\\n\"\n+\n+    embed = TopicEmbed.where(embed_url: url).first\n+    content_sha1 = Digest::SHA1.hexdigest(contents)\n+    post = nil\n+\n+    # If there is no embed, create a topic, post and the embed.\n+    if embed.blank?\n+      Topic.transaction do\n+        creator = PostCreator.new(user, title: title, raw: absolutize_urls(url, contents), skip_validations: true, cook_method: Post.cook_methods[:raw_html])\n+        post = creator.create\n+        if post.present?\n+          TopicEmbed.create!(topic_id: post.topic_id,\n+                             embed_url: url,\n+                             content_sha1: content_sha1,\n+                             post_id: post.id)\n+        end\n+      end\n+    else\n+      post = embed.post\n+      # Update the topic if it changed\n+      if content_sha1 != embed.content_sha1\n+        revisor = PostRevisor.new(post)\n+        revisor.revise!(user, absolutize_urls(url, contents), skip_validations: true, bypass_rate_limiter: true)\n+        embed.update_column(:content_sha1, content_sha1)\n+      end\n+    end\n+\n+    post","path":"app/models/topic_embed.rb","commit_id":"4f8aed295a29954023b2849c060ef4fb299d1b5d","original_commit_id":"4f8aed295a29954023b2849c060ef4fb299d1b5d","user":{"login":"factory-droid[bot]","id":138933559,"node_id":"BOT_kgDOCEf1Nw","avatar_url":"https://avatars.githubusercontent.com/in/358017?v=4","gravatar_id":"","url":"https://api.github.com/users/factory-droid%5Bbot%5D","html_url":"https://github.com/apps/factory-droid","followers_url":"https://api.github.com/users/factory-droid%5Bbot%5D/followers","following_url":"https://api.github.com/users/factory-droid%5Bbot%5D/following{/other_user}","gists_url":"https://api.github.com/users/factory-droid%5Bbot%5D/gists{/gist_id}","starred_url":"https://api.github.com/users/factory-droid%5Bbot%5D/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/factory-droid%5Bbot%5D/subscriptions","organizations_url":"https://api.github.com/users/factory-droid%5Bbot%5D/orgs","repos_url":"https://api.github.com/users/factory-droid%5Bbot%5D/repos","events_url":"https://api.github.com/users/factory-droid%5Bbot%5D/events{/privacy}","received_events_url":"https://api.github.com/users/factory-droid%5Bbot%5D/received_events","type":"Bot","user_view_type":"public","site_admin":false},"body":"**[P0] Prevent SSRF when importing remote content**\n\n`Readability::Document.new(open(url).read, ...)` fetches `url` derived from embed inputs (and Disqus imports) without any allowlist/private-IP blocking, which is a classic SSRF vector. Validate `url` against an approved host list (and block localhost/private ranges) before performing the request.","created_at":"2026-01-16T19:43:17Z","updated_at":"2026-01-16T19:43:17Z","html_url":"https://github.com/droid-code-review-evals/droid-discourse/pull/4#discussion_r2699755725","pull_request_url":"https://api.github.com/repos/droid-code-review-evals/droid-discourse/pulls/4","_links":{"self":{"href":"https://api.github.com/repos/droid-code-review-evals/droid-discourse/pulls/comments/2699755725"},"html":{"href":"https://github.com/droid-code-review-evals/droid-discourse/pull/4#discussion_r2699755725"},"pull_request":{"href":"https://api.github.com/repos/droid-code-review-evals/droid-discourse/pulls/4"}},"reactions":{"url":"https://api.github.com/repos/droid-code-review-evals/droid-discourse/pulls/comments/2699755725/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"start_line":null,"original_start_line":null,"start_side":null,"line":41,"original_line":41,"side":"RIGHT","author_association":"NONE","original_position":41,"position":41,"subject_type":"line"},{"url":"https://api.github.com/repos/droid-code-review-evals/droid-discourse/pulls/comments/2699755867","pull_request_review_id":3672453249,"id":2699755867,"node_id":"PRRC_kwDOQ4pSzs6g6wFb","diff_hunk":"@@ -0,0 +1,55 @@\n+class TopicRetriever\n+\n+  def initialize(embed_url, opts=nil)\n+    @embed_url = embed_url\n+    @opts = opts || {}\n+  end\n+\n+  def retrieve\n+    perform_retrieve unless (invalid_host? || retrieved_recently?)\n+  end\n+\n+  private\n+\n+    def invalid_host?\n+      SiteSetting.embeddable_host != URI(@embed_url).host\n+    rescue URI::InvalidURIError","path":"lib/topic_retriever.rb","commit_id":"4f8aed295a29954023b2849c060ef4fb299d1b5d","original_commit_id":"4f8aed295a29954023b2849c060ef4fb299d1b5d","user":{"login":"factory-droid[bot]","id":138933559,"node_id":"BOT_kgDOCEf1Nw","avatar_url":"https://avatars.githubusercontent.com/in/358017?v=4","gravatar_id":"","url":"https://api.github.com/users/factory-droid%5Bbot%5D","html_url":"https://github.com/apps/factory-droid","followers_url":"https://api.github.com/users/factory-droid%5Bbot%5D/followers","following_url":"https://api.github.com/users/factory-droid%5Bbot%5D/following{/other_user}","gists_url":"https://api.github.com/users/factory-droid%5Bbot%5D/gists{/gist_id}","starred_url":"https://api.github.com/users/factory-droid%5Bbot%5D/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/factory-droid%5Bbot%5D/subscriptions","organizations_url":"https://api.github.com/users/factory-droid%5Bbot%5D/orgs","repos_url":"https://api.github.com/users/factory-droid%5Bbot%5D/repos","events_url":"https://api.github.com/users/factory-droid%5Bbot%5D/events{/privacy}","received_events_url":"https://api.github.com/users/factory-droid%5Bbot%5D/received_events","type":"Bot","user_view_type":"public","site_admin":false},"body":"**[P0] Crash when embeddable_host is nil (URI host compare)**\n\n`invalid_host?` does `SiteSetting.embeddable_host != URI(@embed_url).host`; if the site setting is `nil`/blank it will still pass through and then `retrieve` calls `perform_retrieve` (the spec expects it not to). Add a blank check (treat blank as invalid) before comparing hosts.","created_at":"2026-01-16T19:43:21Z","updated_at":"2026-01-16T19:43:21Z","html_url":"https://github.com/droid-code-review-evals/droid-discourse/pull/4#discussion_r2699755867","pull_request_url":"https://api.github.com/repos/droid-code-review-evals/droid-discourse/pulls/4","_links":{"self":{"href":"https://api.github.com/repos/droid-code-review-evals/droid-discourse/pulls/comments/2699755867"},"html":{"href":"https://github.com/droid-code-review-evals/droid-discourse/pull/4#discussion_r2699755867"},"pull_request":{"href":"https://api.github.com/repos/droid-code-review-evals/droid-discourse/pulls/4"}},"reactions":{"url":"https://api.github.com/repos/droid-code-review-evals/droid-discourse/pulls/comments/2699755867/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"start_line":null,"original_start_line":null,"start_side":null,"line":16,"original_line":16,"side":"RIGHT","author_association":"NONE","original_position":16,"position":16,"subject_type":"line"},{"url":"https://api.github.com/repos/droid-code-review-evals/droid-discourse/pulls/comments/2699756021","pull_request_review_id":3672453442,"id":2699756021,"node_id":"PRRC_kwDOQ4pSzs6g6wH1","diff_hunk":"@@ -0,0 +1,58 @@\n+require 'spec_helper'\n+\n+describe EmbedController do\n+\n+  let(:host) { \"eviltrout.com\" }\n+  let(:embed_url) { \"http://eviltrout.com/2013/02/10/why-discourse-uses-emberjs.html\" }\n+\n+  it \"is 404 without an embed_url\" do\n+    get :best\n+    response.should_not be_success\n+  end\n+\n+  it \"raises an error with a missing host\" do\n+    SiteSetting.stubs(:embeddable_host).returns(nil)\n+    get :best, embed_url: embed_url\n+    response.should_not be_success\n+  end\n+\n+  context \"with a host\" do\n+    before do\n+      SiteSetting.stubs(:embeddable_host).returns(host)\n+    end\n+\n+    it \"raises an error with no referer\" do\n+      get :best, embed_url: embed_url\n+      response.should_not be_success\n+    end\n+\n+    context \"success\" do\n+\n+      before do\n+        controller.request.stubs(:referer).returns(embed_url)\n+      end\n+\n+      after do\n+        response.should be_success\n+        response.headers['X-Frame-Options'].should == \"ALLOWALL\"\n+      end\n+\n+      it \"tells the topic retriever to work when no previous embed is found\" do","path":"spec/controllers/embed_controller_spec.rb","commit_id":"4f8aed295a29954023b2849c060ef4fb299d1b5d","original_commit_id":"4f8aed295a29954023b2849c060ef4fb299d1b5d","user":{"login":"factory-droid[bot]","id":138933559,"node_id":"BOT_kgDOCEf1Nw","avatar_url":"https://avatars.githubusercontent.com/in/358017?v=4","gravatar_id":"","url":"https://api.github.com/users/factory-droid%5Bbot%5D","html_url":"https://github.com/apps/factory-droid","followers_url":"https://api.github.com/users/factory-droid%5Bbot%5D/followers","following_url":"https://api.github.com/users/factory-droid%5Bbot%5D/following{/other_user}","gists_url":"https://api.github.com/users/factory-droid%5Bbot%5D/gists{/gist_id}","starred_url":"https://api.github.com/users/factory-droid%5Bbot%5D/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/factory-droid%5Bbot%5D/subscriptions","organizations_url":"https://api.github.com/users/factory-droid%5Bbot%5D/orgs","repos_url":"https://api.github.com/users/factory-droid%5Bbot%5D/repos","events_url":"https://api.github.com/users/factory-droid%5Bbot%5D/events{/privacy}","received_events_url":"https://api.github.com/users/factory-droid%5Bbot%5D/received_events","type":"Bot","user_view_type":"public","site_admin":false},"body":"**[P2] Spec mocks TopicRetriever but controller enqueues a job**\n\n`EmbedController#best` calls `Jobs.enqueue(:retrieve_topic, ...)`, but this spec expects `TopicRetriever.new`/`retrieve` to be called. As written, this test will fail (or silently not assert the real behavior); update the spec to assert job enqueueing instead.","created_at":"2026-01-16T19:43:25Z","updated_at":"2026-01-16T19:43:25Z","html_url":"https://github.com/droid-code-review-evals/droid-discourse/pull/4#discussion_r2699756021","pull_request_url":"https://api.github.com/repos/droid-code-review-evals/droid-discourse/pulls/4","_links":{"self":{"href":"https://api.github.com/repos/droid-code-review-evals/droid-discourse/pulls/comments/2699756021"},"html":{"href":"https://github.com/droid-code-review-evals/droid-discourse/pull/4#discussion_r2699756021"},"pull_request":{"href":"https://api.github.com/repos/droid-code-review-evals/droid-discourse/pulls/4"}},"reactions":{"url":"https://api.github.com/repos/droid-code-review-evals/droid-discourse/pulls/comments/2699756021/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"start_line":null,"original_start_line":null,"start_side":null,"line":40,"original_line":40,"side":"RIGHT","author_association":"NONE","original_position":40,"position":40,"subject_type":"line"},{"url":"https://api.github.com/repos/droid-code-review-evals/droid-discourse/pulls/comments/2699756190","pull_request_review_id":3672453661,"id":2699756190,"node_id":"PRRC_kwDOQ4pSzs6g6wKe","diff_hunk":"@@ -0,0 +1,40 @@\n+require 'spec_helper'\n+require_dependency 'jobs/regular/process_post'","path":"spec/jobs/poll_feed_spec.rb","commit_id":"4f8aed295a29954023b2849c060ef4fb299d1b5d","original_commit_id":"4f8aed295a29954023b2849c060ef4fb299d1b5d","user":{"login":"factory-droid[bot]","id":138933559,"node_id":"BOT_kgDOCEf1Nw","avatar_url":"https://avatars.githubusercontent.com/in/358017?v=4","gravatar_id":"","url":"https://api.github.com/users/factory-droid%5Bbot%5D","html_url":"https://github.com/apps/factory-droid","followers_url":"https://api.github.com/users/factory-droid%5Bbot%5D/followers","following_url":"https://api.github.com/users/factory-droid%5Bbot%5D/following{/other_user}","gists_url":"https://api.github.com/users/factory-droid%5Bbot%5D/gists{/gist_id}","starred_url":"https://api.github.com/users/factory-droid%5Bbot%5D/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/factory-droid%5Bbot%5D/subscriptions","organizations_url":"https://api.github.com/users/factory-droid%5Bbot%5D/orgs","repos_url":"https://api.github.com/users/factory-droid%5Bbot%5D/repos","events_url":"https://api.github.com/users/factory-droid%5Bbot%5D/events{/privacy}","received_events_url":"https://api.github.com/users/factory-droid%5Bbot%5D/received_events","type":"Bot","user_view_type":"public","site_admin":false},"body":"**[P2] Unrelated require may break the spec load**\n\nThis spec `require_dependency 'jobs/regular/process_post'`, but the job under test is `Jobs::PollFeed` and `process_post` may not exist/need loading here. If `jobs/regular/process_post` isn’t present, the spec will fail to load; remove or correct the require to match the file being tested.","created_at":"2026-01-16T19:43:29Z","updated_at":"2026-01-16T19:43:29Z","html_url":"https://github.com/droid-code-review-evals/droid-discourse/pull/4#discussion_r2699756190","pull_request_url":"https://api.github.com/repos/droid-code-review-evals/droid-discourse/pulls/4","_links":{"self":{"href":"https://api.github.com/repos/droid-code-review-evals/droid-discourse/pulls/comments/2699756190"},"html":{"href":"https://github.com/droid-code-review-evals/droid-discourse/pull/4#discussion_r2699756190"},"pull_request":{"href":"https://api.github.com/repos/droid-code-review-evals/droid-discourse/pulls/4"}},"reactions":{"url":"https://api.github.com/repos/droid-code-review-evals/droid-discourse/pulls/comments/2699756190/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"start_line":null,"original_start_line":null,"start_side":null,"line":2,"original_line":2,"side":"RIGHT","author_association":"NONE","original_position":2,"position":2,"subject_type":"line"}]